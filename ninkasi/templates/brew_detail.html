{% extends 'base_detail.html' %}

{% load i18n ninkasi_tags %}

{% block extra_actions %}

{% if user|push:'phase'|has_obj_perm:'add' %}
<a class="btn btn-outline-success btn-sm"
   href="{% url 'create_phase' %}{{ object.pk }}"
   data-toggle="tooltip" data-placement="right" title="{% trans 'Add phase' %}">
  <span class="fas fa-plus" />
  <span class="fas fa-hourglass" />
</a>
{% endif %}

{% if user|push:'sample'|has_obj_perm:'add' %}
<a class="btn btn-outline-success btn-sm"
   href="{% url 'create_sample' %}{{ object.pk }}"
   data-toggle="tooltip" data-placement="right" title="{% trans 'Add sample' %}">
  <span class="fas fa-plus" />
  <span class="fas fa-vial" />
</a>
{% endif %}

{% if not object.has_transfer %}
<a class="btn btn-outline-success btn-sm"
   href="{% url 'transfer' view.ct_id object.id %}"
   data-toggle="tooltip" data-placement="right" title="{% trans 'Transfer' %}">
  <span class="fas fa-left-right" />
</a>
{% endif %}

{% endblock %}

{% block content %}


<dl class="row">
  <dt class="col-sm-3">{% trans 'Date' %}</dt>
  <dd class="col-sm-9">{{ object.date }}</dd>
  <dt class="col-sm-3">{% trans 'Volume' %}</dt>
  <dd class="col-sm-9">{{ object.volume }}</dd>
  <dt class="col-sm-3">{% trans 'Brewhouse' %}</dt>
  <dd class="col-sm-9">
    <a href="object.brewhouse|detail_url">{{ object.brewhouse }}</a>
  </dd>
  <dt class="col-sm-3">{% trans 'Batch ' %}</dt>
  <dd class="col-sm-9">
    <a href="{{ object.batch|detail_url }}">{{ object.batch }}</a>
  </dd>
</dl>


<h2>Materials</h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Material</th>
      <th>Unit</th>
      <th>Amount</th>
      <th>Batch Nr.</th>
    </tr>
  </thead>
  <tbody>
  {% for material in object.list_materials %}
  <tr>
    <td>{{ material.material }}</td>
    <td>{{ material.unit }}</td>
    <td>{{ material.amount }}</td>
    <td>{{ material.batchnr }}</td>
  </tr>
  {% endfor %}
  </tbody>
</table>


<h2>Steps</h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Step</th>
      <th>Start time</th>
      <th>End time</th>
      <th>Duration (minutes)</th>
    </tr>
  </thead>
  <tbody>
  {% for step in object.list_steps %}
  <tr>
    <td>{{ step.step }}</td>
    <td>{{ step.start_time }}</td>
    <td>{{ step.end_time }}</td>
    <td>{{ step.duration }}</td>
  </tr>
  {% endfor %}
  </tbody>
</table>


<!--h2>Racking history</h2>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Tank</th>
      <th>From</th>
      <th>To</th>
    </tr>
  </thead>
  <tbody>
  {% for tank in object.list_tanks %}
  <tr>
    <td>{{ tank.tank }}</td>
    <td>{{ tank.date_from|date:"d-m-Y H:i " }}</td>
    <td>{{ tank.date_to|date:"d-m-Y H:i " }}</td>
  </tr>
  {% endfor %}
  </tbody>
</table-->

{% endblock content %}
